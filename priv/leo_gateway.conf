#======================================================================
# LeoFS - Gateway Configuration
#
# See: http://www.leofs.org/docs/configuration.html#leofs-gateway
#======================================================================
## --------------------------------------------------------------------
## SASL
## --------------------------------------------------------------------
## See: http://www.erlang.org/doc/man/sasl_app.html
##
## The following configuration parameters are defined for
## the SASL application. See app(4) for more information
## about configuration parameters

## SASL error log path
## sasl.sasl_error_log = ./log/sasl/sasl-error.log

## Restricts the error logging performed by the specified sasl_error_logger
## to error reports, progress reports, or both.
## errlog_type = [error | progress | all]
## sasl.errlog_type = error

## Specifies in which directory the files are stored.
## If this parameter is undefined or false, the error_logger_mf_h is not installed.
# sasl.error_logger_mf_dir = ./log/sasl

## Specifies how large each individual file can be.
## If this parameter is undefined, the error_logger_mf_h is not installed.
## sasl.error_logger_mf_maxbytes = 10485760

## Specifies how many files are used.
## If this parameter is undefined, the error_logger_mf_h is not installed.
## sasl.error_logger_mf_maxfiles = 5

## --------------------------------------------------------------------
## GATEWAY
## --------------------------------------------------------------------
## LeoFS version
## gateway.system_version = 0.16.5

## Name of Manager node(s)
# gateway.manager = manager_0@127.0.0.1
# gateway.manager = manager_1@127.0.0.1

## Gateway’s HTTP API to use: [s3 | rest | embed]
gateway.http.handler = s3

## Port number the Gateway uses for HTTP connections
gateway.http.port = 8080

## Numbers of processes listening for connections
gateway.http.num_of_acceptors = 128

## Maximum number of requests allowed in a single keep-alive session
gateway.http.max_keepalive = 4096

## Total number of virtual directories
## gateway.http.layer_of_dirs = 12

## Port number the Gateway uses for HTTPS connections
## gateway.http.ssl_port     = 8443

## SSL Certificate file
## gateway.http.ssl_certfile = ./etc/server_cert.pem

## SSL key
## gateway.http.ssl_keyfile  = ./etc/server_key.pem

## Synchronized time of a bucket property (second)
gateway.bucket_prop_sync_interval = 300

## --------------------------------------------------------------------
## GATEWAY - Large Object
## --------------------------------------------------------------------
## Total number of chunked objects
gateway.large_object.max_chunked_objs  = 1000

## Maximum length of an object
gateway.large_object.max_len_for_obj   = 524288000

## Length of a chunked object
gateway.large_object.chunked_obj_len   = 5242880

## Beginning of length of a chunked object
gateway.large_object.threshold_obj_len = 5767168

## --------------------------------------------------------------------
## GATEWAY - Cache
## --------------------------------------------------------------------
## If this parameter is 'true', Gateway turns on HTTP-based cache server, like Varnish OR Squid.
## If this parameter is 'false', Stores objects into the Gateway’s memory.
## When operating READ, the Etag of the cache is compared with a backend storage’s Etag.
## gateway.cache.http_cache = false

## A number of cache workers
## gateway.cache.cache_workers = 16

## Memory cache capacity in bytes
gateway.cache.cache_ram_capacity  = 1073741824

## Disk cache capacity in bytes
gateway.cache.cache_disc_capacity = 524288000

## When the length of the object exceeds this value, store the object on disk
gateway.cache.cache_disc_threshold_len = 1048576

## Directory for the disk cache data
gateway.cache.cache_disc_dir_data    = ./cache/data

## Directory for the disk cache journal
gateway.cache.cache_disc_dir_journal = ./cache/journal

## Cache Expire in seconds
gateway.cache.cache_expire = 300

## Cache Max Content Length in bytes
gateway.cache.cache_max_content_len = 1048576

## Cache Content Type(s)
## In case of "empty", all objects are cached.
## gateway.cache.cachable_content_type =

## Cache Path Pattern(s) (regular expression)
## In case of "empty", all objects are cached.
## gateway.cache.cachable_path_pattern =

## --------------------------------------------------------------------
## GATEWAY - Timeout
## --------------------------------------------------------------------
## Timeout value when requesting to a storage
## 0 to 65,535 bytes
## gateway.timeout.level_1 =  5000

## 65,535 to 131,071 bytes
## gateway.timeout.level_2 =  7000

## 131,072 to 524,287 bytes
## gateway.timeout.level_3 = 10000

## 524,288 to 1,048,576 bytes
## gateway.timeout.level_4 = 20000

## 1,048,576 bytes and over
## gateway.timeout.level_5 = 30000

## --------------------------------------------------------------------
## GATEWAY - Log
## --------------------------------------------------------------------
##
## gateway.log.log_level = 1

## gateway.log.is_enable_access_log = false

## gateway.log.log_appender = file
## gateway.log.output_path  = ./log/

## gateway.log.is_enable_esearch = false
## gateway.log.esearch.host = 127.0.0.1
## gateway.log.esearch.port = 9200
## gateway.log.esearch.timeout = 5000
## gateway.log.esearch.esearch_bulk_duration = 3000

## --------------------------------------------------------------------
## GATEWAY - Other Directories
## --------------------------------------------------------------------
## Directory of queue for monitoring "RING"
## gateway.queue_dir  = ./work/queue

## Directory of SNMP agent configuration
## gateway.snmp_agent = ./snmp/snmpa_gateway_0/LEO-GATEWAY

#======================================================================
# For vm.args
#======================================================================
## Name of the leofs-gateway node
nodename = gateway_0@127.0.0.1

## Cookie for distributed node communication.  All nodes in the same cluster
## should use the same cookie or they will not be able to communicate.
distributed_cookie = 401321b4

erlang.asyc_threads = 32

## Increase number of concurrent ports/sockets
erlang.max_ports = 64000

## Set the location of crash dumps
erlang.crash_dump = ./log/erl_crash.dump

## Raise the ETS table limit
erlang.max_ets_tables = 256000

## Raise the default erlang process limit
process_limit = 1048576

## Path of SNMP-agent configuration
snmp_conf = leo_gateway_snmp
